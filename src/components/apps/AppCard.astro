---
interface Props {
  name: string;
  description: string;
  icon: string;
  href: string;
  platforms?: string[];
  comingSoon?: boolean;
  index?: number;
}

const { name, description, icon, href, platforms = [], comingSoon = false, index = 0 } = Astro.props;
---

<a
  href={comingSoon ? undefined : href}
  class:list={[
    `reveal stagger-${Math.min(index + 1, 6)} group block p-6 rounded-2xl transition-all duration-300`,
    comingSoon
      ? 'cursor-default bg-gray-100/50 dark:bg-gray-800/30 border border-gray-200/50 dark:border-gray-700/50 opacity-60'
      : 'card-interactive',
  ]}
  data-tilt={!comingSoon}
>
  <div class="flex items-start gap-5">
    <!-- App Icon -->
    <div
      class:list={[
        'relative w-16 h-16 rounded-2xl flex items-center justify-center text-3xl flex-shrink-0 transition-transform duration-300',
        comingSoon
          ? 'bg-gray-200 dark:bg-gray-700'
          : 'icon-box-lg group-hover:scale-110',
      ]}
    >
      {icon}
      {!comingSoon && (
        <div class="absolute inset-0 rounded-2xl bg-gradient-to-br from-primary-500/20 to-accent-500/20 opacity-0 group-hover:opacity-100 transition-opacity"></div>
      )}
    </div>

    <!-- App Info -->
    <div class="flex-1 min-w-0">
      <div class="flex items-center gap-3 mb-2">
        <h3 class="text-xl font-display font-semibold text-gray-900 dark:text-white truncate group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors">
          {name}
        </h3>
        {comingSoon && (
          <span class="badge-primary">Coming Soon</span>
        )}
      </div>
      <p class="text-gray-600 dark:text-gray-400 leading-relaxed line-clamp-2 mb-4">
        {description}
      </p>

      {platforms.length > 0 && !comingSoon && (
        <div class="flex items-center gap-2">
          {platforms.map((platform) => (
            <span class="inline-flex items-center gap-1.5 px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 text-xs font-medium rounded-lg">
              {platform === 'iOS' && (
                <svg class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="currentColor"><path d="M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"/></svg>
              )}
              {platform === 'Android' && (
                <svg class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="currentColor"><path d="M17.6 9.48l1.84-3.18c.16-.31.04-.69-.26-.85-.29-.15-.65-.06-.83.22l-1.88 3.24a11.463 11.463 0 00-8.94 0L5.65 5.67c-.19-.29-.54-.38-.84-.22-.31.16-.43.54-.27.85L6.4 9.48C3.3 11.25 1.28 14.44 1 18h22c-.28-3.56-2.3-6.75-5.4-8.52zM7 15.25a1.25 1.25 0 110-2.5 1.25 1.25 0 010 2.5zm10 0a1.25 1.25 0 110-2.5 1.25 1.25 0 010 2.5z"/></svg>
              )}
              {platform}
            </span>
          ))}
        </div>
      )}
    </div>

    <!-- Arrow -->
    {!comingSoon && (
      <div class="flex items-center justify-center w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-800 group-hover:bg-gradient-to-br group-hover:from-primary-500 group-hover:to-accent-500 transition-all flex-shrink-0">
        <svg
          class="w-5 h-5 text-gray-400 group-hover:text-white transition-all group-hover:translate-x-0.5"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
        </svg>
      </div>
    )}
  </div>
</a>
